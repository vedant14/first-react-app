[{"/Users/vedantlohbare/Documents/CodingProjects/Gatsby/ig-frontend/src/App.js":"1","/Users/vedantlohbare/Documents/CodingProjects/Gatsby/ig-frontend/src/index.js":"2","/Users/vedantlohbare/Documents/CodingProjects/Gatsby/ig-frontend/src/components/Post.js":"3","/Users/vedantlohbare/Documents/CodingProjects/Gatsby/ig-frontend/src/reportWebVitals.js":"4","/Users/vedantlohbare/Documents/CodingProjects/Gatsby/ig-frontend/src/pages/Home.js":"5","/Users/vedantlohbare/Documents/CodingProjects/Gatsby/ig-frontend/src/components/Nav.js":"6","/Users/vedantlohbare/Documents/CodingProjects/Gatsby/ig-frontend/src/pages/Create.js":"7","/Users/vedantlohbare/Documents/CodingProjects/Gatsby/ig-frontend/src/pages/SinglePost.js":"8","/Users/vedantlohbare/Documents/CodingProjects/Gatsby/ig-frontend/src/context/UserContext.js":"9","/Users/vedantlohbare/Documents/CodingProjects/Gatsby/ig-frontend/src/pages/Login.js":"10","/Users/vedantlohbare/Documents/CodingProjects/Gatsby/ig-frontend/src/pages/Signup.js":"11","/Users/vedantlohbare/Documents/CodingProjects/Gatsby/ig-frontend/src/context/LikesContext.js":"12"},{"size":833,"mtime":1606495799857,"results":"13","hashOfConfig":"14"},{"size":722,"mtime":1606545276700,"results":"15","hashOfConfig":"14"},{"size":368,"mtime":1606326521117,"results":"16","hashOfConfig":"14"},{"size":362,"mtime":1606147222571,"results":"17","hashOfConfig":"14"},{"size":663,"mtime":1606406098438,"results":"18","hashOfConfig":"14"},{"size":574,"mtime":1606492932234,"results":"19","hashOfConfig":"14"},{"size":1512,"mtime":1606496659030,"results":"20","hashOfConfig":"14"},{"size":5313,"mtime":1606582140136,"results":"21","hashOfConfig":"14"},{"size":291,"mtime":1606491328993,"results":"22","hashOfConfig":"14"},{"size":1407,"mtime":1606542915002,"results":"23","hashOfConfig":"14"},{"size":1452,"mtime":1606493866276,"results":"24","hashOfConfig":"14"},{"size":1581,"mtime":1606581896272,"results":"25","hashOfConfig":"14"},{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},"7a1izx",{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"31","messages":"32","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"33"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"39","messages":"40","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"41","messages":"42","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"43","usedDeprecatedRules":"36"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"46"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"49","messages":"50","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"51","messages":"52","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"53","usedDeprecatedRules":"28"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"/Users/vedantlohbare/Documents/CodingProjects/Gatsby/ig-frontend/src/App.js",[],["56","57"],"/Users/vedantlohbare/Documents/CodingProjects/Gatsby/ig-frontend/src/index.js",[],"/Users/vedantlohbare/Documents/CodingProjects/Gatsby/ig-frontend/src/components/Post.js",["58"],"import React from \"react\";\n\nconst API_URL = \"http://localhost:1337\";\nconst formatImageUrl = (url) => `${API_URL}${url}`;\n\nexport default ({ description, likes, id, url }) => {\n\treturn (\n\t\t<div className=\"Post\">\n\t\t\t<img\n\t\t\t\tclassName=\"Post_Image\"\n\t\t\t\tsrc={formatImageUrl(url)}\n\t\t\t\talt=\"Vedant\"\n\t\t\t/>\n\t\t\t<h4> {description}</h4>\n\t\t\t<p> Likes: {likes}</p>\n\t\t</div>\n\t);\n};\n","/Users/vedantlohbare/Documents/CodingProjects/Gatsby/ig-frontend/src/reportWebVitals.js",[],["59","60"],"/Users/vedantlohbare/Documents/CodingProjects/Gatsby/ig-frontend/src/pages/Home.js",["61"],"/Users/vedantlohbare/Documents/CodingProjects/Gatsby/ig-frontend/src/components/Nav.js",["62"],"/Users/vedantlohbare/Documents/CodingProjects/Gatsby/ig-frontend/src/pages/Create.js",["63","64"],"import React, { useState, useContext } from \"react\";\nimport { UserContext } from \"../context/UserContext\";\n\nexport default () => {\n\tconst [description, setDescription] = useState(\"\");\n\tconst [file, setFile] = useState(null);\n\tconst [error, setError] = useState(\"\");\n\n\tconst { user } = useContext(UserContext);\n\n\tconst handleSubmit = async (event) => {\n\t\tevent.preventDefault();\n\n\t\tif (!user) {\n\t\t\tsetError(\"Please log in\");\n\t\t\treturn;\n\t\t}\n\n\t\tif (!description) {\n\t\t\tsetError(\"Please add a description\");\n\t\t\treturn;\n\t\t}\n\t\tif (!file) {\n\t\t\tsetError(\"Please attach a file\");\n\t\t\treturn;\n\t\t}\n\n\t\tconst formData = new FormData();\n\t\tformData.append(\"data\", JSON.stringify({ description }));\n\t\tformData.append(\"files.image\", file);\n\n\t\ttry {\n\t\t\tconst response = await fetch(\"http://localhost:1337/posts\", {\n\t\t\t\tmethod: \"Post\",\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `Bearer ${user.jwt}`,\n\t\t\t\t},\n\t\t\t\tbody: formData,\n\t\t\t});\n\t\t\tconst data = await response.json();\n\t\t} catch (err) {\n\t\t\tconsole.log(\"Exception \", err);\n\t\t}\n\t};\n\treturn (\n\t\t<div className=\"Create\">\n\t\t\t<h1>Create</h1>\n\t\t\t{error && <p>{error}</p>}\n\t\t\t<form onSubmit={handleSubmit}>\n\t\t\t\t<input\n\t\t\t\t\tplaceholder=\"description\"\n\t\t\t\t\tvalue={description}\n\t\t\t\t\tonChange={(event) => {\n\t\t\t\t\t\tsetError(\"\");\n\t\t\t\t\t\tsetDescription(event.target.value);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"file\"\n\t\t\t\t\tplaceholder=\"Upload file\"\n\t\t\t\t\tonChange={(event) => {\n\t\t\t\t\t\tsetError(\"\");\n\t\t\t\t\t\tsetFile(event.target.files[0]);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t<button>Submit</button>\n\t\t\t</form>\n\t\t</div>\n\t);\n};\n","/Users/vedantlohbare/Documents/CodingProjects/Gatsby/ig-frontend/src/pages/SinglePost.js",["65","66","67","68","69","70"],"import React, {useState, useEffect, useContext} from 'react'\nimport Post from '../components/Post'\n\nimport {UserContext} from '../context/UserContext'\nimport {LikesContext} from '../context/LikesContext'\n\nexport default ({match, history}) => {\n\n    const {id} = match.params\n    console.log(\"id\", id)\n\n    const {user, setUser} = useContext(UserContext)\n    console.log(\"user\", user)\n    console.log(\"setUser\", setUser)\n\n    const {likesGiven, reloader} = useContext(LikesContext)\n\n    const isPostAlreadyLiked = (() => {\n        return likesGiven && likesGiven.find(like => like.post && like.post.id == id)\n    })()\n\n    console.log(\"isPostAlreadyLiked\", isPostAlreadyLiked)\n\n    const [post, setPost] = useState({})\n    const [loading, setLoading] = useState(true)\n    const [edit, setEdit] = useState(false)\n\n    //Used for the edit form\n    const [description, setDescription] = useState('')\n\n    const fetchPost = async () => {\n        const response = await fetch(`http://localhost:1337/posts/${id}`)\n        const data = await response.json()\n\n        console.log(\"data\", data)\n        setPost(data)\n        setDescription(data.description)\n        setLoading(false)\n    }\n\n    const handleDelete = async () => {\n        const response = await fetch(`http://localhost:1337/posts/${id}`, {\n            method: 'DELETE',\n            headers: {\n                'Authorization': `Bearer ${user.jwt}`\n            }\n        })\n        const data = await response.json()\n        history.push('/')\n    }\n\n    const handleEditSubmit = async (event) => {\n        event.preventDefault()\n        console.log(\"handleEditSubmit\")\n\n        const response = await fetch(`http://localhost:1337/posts/${id}`, {\n            method: 'PUT',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${user.jwt}`\n            },\n            body: JSON.stringify({\n                description\n            })\n        })\n\n        const data = await response.json()\n        fetchPost()\n        console.log(\"handleEditSubmit data\", data)\n\n    }\n\n    const handleLike = async () => {\n        try{\n            const response = await fetch('http://localhost:1337/likes', {\n                method: 'POST',\n                headers: {\n                    'Authorization': `Bearer ${user.jwt}`,\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    post: parseInt(id)\n                })\n            })\n            fetchPost()\n            reloader()\n        } catch(err){\n            console.log(\"Exception \", err)\n        }\n    }\n\n    const handleRemoveLike = async () => {\n        try{\n            const response = await fetch(`http://localhost:1337/likes/${id}`, {\n                method: 'DELETE',\n                headers: {\n                    'Authorization': `Bearer ${user.jwt}`\n                }\n            })\n            fetchPost()\n            reloader()\n        } catch(err){\n            console.log(\"Exception \", err)\n        }\n    }\n\n    useEffect(() => {\n        fetchPost()\n    }, [])\n\n    return (\n        <div>\n            {loading &&\n                <p>Loading...</p>\n            }\n            {!loading &&\n                <>\n                    {post.id &&\n                        <>\n                            <Post \n                                description={post.description}\n                                url={post.image && post.image.url}\n                                likes={post.likes}\n                            />\n\n                            {user &&\n                                <>\n                                    {isPostAlreadyLiked && \n                                        <button onClick={handleRemoveLike}>Remove Like</button>\n                                    }\n\n                                    {!isPostAlreadyLiked &&\n                                        <button onClick={handleLike}>Like</button>\n                                    }\n                                </>\n                            }\n\n                            {user && user.user && post && post.author && post.author.id === user.user.id &&\n                                <>\n                                    <button onClick={handleDelete}>Delete this Post</button>\n                                    <button onClick={() => setEdit(true)}>Edit this Post</button>\n                                    {edit &&\n                                        <form onSubmit={handleEditSubmit}>\n                                            <input \n                                                value={description}\n                                                onChange={(event) => setDescription(event.target.value)} \n                                                placeholder=\"New description\" \n                                            />\n                                            <button>Confirm</button>\n                                        </form>\n                                    }\n                                </>\n                            }\n\n                        </>\n                    }\n                    {!post.id &&\n                        <p>404 - not found</p>\n                    }\n                </>\n            }\n        </div>\n    )\n\n}","/Users/vedantlohbare/Documents/CodingProjects/Gatsby/ig-frontend/src/context/UserContext.js",["71"],"/Users/vedantlohbare/Documents/CodingProjects/Gatsby/ig-frontend/src/pages/Login.js",["72","73"],"/Users/vedantlohbare/Documents/CodingProjects/Gatsby/ig-frontend/src/pages/Signup.js",["74","75"],"import React, { useState, useContext, useEffect } from \"react\";\nimport { UserContext } from \"../context/UserContext\";\nexport default ({ history }) => {\n\tconst [email, setEmail] = useState(\"\");\n\tconst [password, setPassword] = useState(\"\");\n\tconst [error, setError] = useState(\"\");\n\tconst { user, setUser } = useContext(UserContext);\n\n\tuseEffect(() => {\n\t\tif (user) {\n\t\t\thistory.push(\"/\");\n\t\t}\n\t}, [user]);\n\tconst handleSubmit = async (event) => {\n\t\tevent.preventDefault();\n\n\t\ttry {\n\t\t\tconst response = await fetch(\n\t\t\t\t\"http://localhost:1337/auth/local/register\",\n\t\t\t\t{\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Content-type\": \"application/json\",\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\tusername: email,\n\t\t\t\t\t\temail,\n\t\t\t\t\t\tpassword,\n\t\t\t\t\t}),\n\t\t\t\t}\n\t\t\t);\n\t\t\tconst data = await response.json();\n\t\t\tif (data.message) {\n\t\t\t\tsetError(data.message[0].messages[0].message);\n\t\t\t\treturn; //stop execution\n\t\t\t}\n\t\t\tsetUser(data);\n\t\t} catch (err) {\n\t\t\tsetError(\"Something went wrong\", err);\n\t\t}\n\t};\n\treturn (\n\t\t<div>\n\t\t\t<h2>Signup</h2>\n\t\t\t<form onSubmit={handleSubmit}>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"email\"\n\t\t\t\t\tvalue={email}\n\t\t\t\t\tonChange={(event) => {\n\t\t\t\t\t\tsetError(\"\");\n\t\t\t\t\t\tsetEmail(event.target.value);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tvalue={password}\n\t\t\t\t\tonChange={(event) => {\n\t\t\t\t\t\tsetError(\"\");\n\t\t\t\t\t\tsetPassword(event.target.value);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t<button> SignUp </button>\n\t\t\t\t{error && <p>{error}</p>}\n\t\t\t</form>\n\t\t</div>\n\t);\n};\n","/Users/vedantlohbare/Documents/CodingProjects/Gatsby/ig-frontend/src/context/LikesContext.js",["76","77"],{"ruleId":"78","replacedBy":"79"},{"ruleId":"80","replacedBy":"81"},{"ruleId":"82","severity":1,"message":"83","line":6,"column":1,"nodeType":"84","endLine":18,"endColumn":3},{"ruleId":"78","replacedBy":"85"},{"ruleId":"80","replacedBy":"86"},{"ruleId":"82","severity":1,"message":"83","line":4,"column":1,"nodeType":"84","endLine":28,"endColumn":3},{"ruleId":"82","severity":1,"message":"83","line":4,"column":1,"nodeType":"84","endLine":28,"endColumn":3},{"ruleId":"82","severity":1,"message":"83","line":4,"column":1,"nodeType":"84","endLine":70,"endColumn":3},{"ruleId":"87","severity":1,"message":"88","line":40,"column":10,"nodeType":"89","messageId":"90","endLine":40,"endColumn":14},{"ruleId":"82","severity":1,"message":"83","line":7,"column":1,"nodeType":"84","endLine":165,"endColumn":2},{"ruleId":"91","severity":1,"message":"92","line":19,"column":80,"nodeType":"93","messageId":"94","endLine":19,"endColumn":82},{"ruleId":"87","severity":1,"message":"88","line":48,"column":15,"nodeType":"89","messageId":"90","endLine":48,"endColumn":19},{"ruleId":"87","severity":1,"message":"95","line":75,"column":19,"nodeType":"89","messageId":"90","endLine":75,"endColumn":27},{"ruleId":"87","severity":1,"message":"95","line":94,"column":19,"nodeType":"89","messageId":"90","endLine":94,"endColumn":27},{"ruleId":"96","severity":1,"message":"97","line":109,"column":8,"nodeType":"98","endLine":109,"endColumn":10,"suggestions":"99"},{"ruleId":"82","severity":1,"message":"83","line":5,"column":1,"nodeType":"84","endLine":13,"endColumn":3},{"ruleId":"82","severity":1,"message":"83","line":4,"column":1,"nodeType":"84","endLine":66,"endColumn":3},{"ruleId":"96","severity":1,"message":"100","line":15,"column":5,"nodeType":"98","endLine":15,"endColumn":11,"suggestions":"101"},{"ruleId":"82","severity":1,"message":"83","line":3,"column":1,"nodeType":"84","endLine":67,"endColumn":3},{"ruleId":"96","severity":1,"message":"100","line":13,"column":5,"nodeType":"98","endLine":13,"endColumn":11,"suggestions":"102"},{"ruleId":"82","severity":1,"message":"83","line":6,"column":1,"nodeType":"84","endLine":51,"endColumn":2},{"ruleId":"96","severity":1,"message":"103","line":41,"column":8,"nodeType":"98","endLine":41,"endColumn":14,"suggestions":"104"},"no-native-reassign",["105"],"no-negated-in-lhs",["106"],"import/no-anonymous-default-export","Assign arrow function to a variable before exporting as module default","ExportDefaultDeclaration",["105"],["106"],"no-unused-vars","'data' is assigned a value but never used.","Identifier","unusedVar","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","'response' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'fetchPost'. Either include it or remove the dependency array.","ArrayExpression",["107"],"React Hook useEffect has a missing dependency: 'history'. Either include it or remove the dependency array.",["108"],["109"],"React Hook useEffect has a missing dependency: 'reloader'. Either include it or remove the dependency array.",["110"],"no-global-assign","no-unsafe-negation",{"desc":"111","fix":"112"},{"desc":"113","fix":"114"},{"desc":"113","fix":"115"},{"desc":"116","fix":"117"},"Update the dependencies array to be: [fetchPost]",{"range":"118","text":"119"},"Update the dependencies array to be: [history, user]",{"range":"120","text":"121"},{"range":"122","text":"121"},"Update the dependencies array to be: [reloader, user]",{"range":"123","text":"124"},[3106,3108],"[fetchPost]",[397,403],"[history, user]",[397,403],[1327,1333],"[reloader, user]"]